(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/qualityInspection/qualityInspection"],{1720:function(t,e,a){},"2f7d":function(t,e,a){"use strict";a.r(e);var i=a("5c4b"),s=a.n(i);for(var n in i)"default"!==n&&function(t){a.d(e,t,function(){return i[t]})}(n);e["default"]=s.a},"479a":function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=l(a("0149")),s=l(a("fbdb")),n=l(a("c6ec")),o=l(a("4794")),c=a("2f62");function l(t){return t&&t.__esModule?t:{default:t}}function u(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{},i=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(a).filter(function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable}))),i.forEach(function(e){r(t,e,a[e])})}return t}function r(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var _={components:{popupLayer:i.default,loadingWait:s.default,loadingWaitStyleA:n.default,bottomCountArea:o.default},data:function(){return{quality_wait_quality:"../../static/img/quality_wait_quality.png",quality_jiantou:"../../static/img/quality_jiantou.png",loading_wait_show:!1,StartDate:"",EndDate:"",ReceiptCode:"",MaterialCode:"",MaterialName:"",SupplierName:"",SourceCode:"",MaxResultCount:10,SkipCount:0,scrollTop:0,old:{scrollTop:0},items:[],show_pop:!1,id:"",SampleCode:"",Aql:"",QcResult:"",count:"",bottomCountArea_show:!1}},computed:{connect_url:function(){return this.$store.state.connect_url},post_header:function(){return this.$store.state.post_header},i18n:function(){return this.$t("qualityInspection")},MAC:function(){return this.$store.state.MAC}},onNavigationBarButtonTap:function(t){console.log(t),this.show_pop=!0},methods:u({},(0,c.mapMutations)(["MacInfo"]),(0,c.mapMutations)(["changeToken"]),(0,c.mapMutations)(["changeOrgId"]),(0,c.mapMutations)(["ErrRequestShow"]),{bindQcResultChange:function(t){this.QcResult=t},work:function(){this.SkipCount=0,this.MaxResultCount=10,this.show_pop=!1,this.GetIqcHeaders(this.SkipCount,this.MaxResultCount)},cancelPop:function(){this.show_pop=!1},upper:function(t){console.log(t)},lower:function(t){this.MaxResultCount=10,this.SkipCount+=10,this.GetIqcHeaders(this.SkipCount,this.MaxResultCount)},scroll:function(t){this.old.scrollTop=t.detail.scrollTop},choDateA:function(t){this.StartDate=t},choDateB:function(t){this.EndDate=t},workA:function(t){console.log("A"),this.ReceiptCode=t},workB:function(t){console.log("B"),this.MaterialCode=t},workC:function(t){console.log("C"),this.MaterialName=t},workD:function(t){console.log("D"),this.SupplierName=t},workE:function(t){console.log("E"),this.SourceCode=t},Check:function(e,a){var i=this;if(t.setStorageSync("qcLevel",e),i.id=a,0==e){for(var s="",n=0;n<i.items.length;n++)a==i.items[n].id&&(s=i.items[n].qcResult);2==s&&t.showModal({title:i.i18n.show_modal_title,content:i.i18n.show_modal_content,success:function(t){t.confirm?i.IqcExemption():t.cancel}})}else if(11==e){for(var o=0;o<i.items.length;o++)a==i.items[o].id&&(t.setStorageSync("qualityInspection_data",i.items[o]),i.Aql=i.items[o].aql,i.SampleCode=i.items[o].sampleCode);t.navigateTo({url:"../IncomingQualityInspection/IncomingQualityInspection"})}else if(12==e){for(var c=0;c<i.items.length;c++)a==i.items[c].id&&(t.setStorageSync("qualityInspection_data",i.items[c]),i.Aql=i.items[c].aql,i.SampleCode=i.items[c].sampleCode);t.navigateTo({url:"../IncomingQualityInspectionB/IncomingQualityInspectionB"})}else if(21==e)for(var l=0;l<i.items.length;l++)a==i.items[l].id&&(t.setStorageSync("qualityInspection_data",i.items[l]),i.Aql=i.items[l].aql,i.SampleCode=i.items[l].sampleCode,i.GetIqcAqlNgQty());else if(22==e)for(var u=0;u<i.items.length;u++)a==i.items[u].id&&(t.setStorageSync("qualityInspection_data",i.items[u]),i.Aql=i.items[u].aql,i.SampleCode=i.items[u].sampleCode,i.GetIqcAqlNgQty())},GetIqcHeaders:function(e,a){var i=this;i.loading_wait_show=!0,t.request({url:i.connect_url+"api/services/wmspda/Inspection/GetIqcHeaders",data:{MAC:i.MAC,StartDate:i.StartDate,EndDate:i.EndDate,ReceiptCode:i.ReceiptCode,MaterialCode:i.MaterialCode,MaterialName:i.MaterialName,SupplierName:i.SupplierName,SourceCode:i.SourceCode,MaxResultCount:a,SkipCount:e,QcResult:i.QcResult},method:"POST",header:i.post_header,success:function(t){if(console.log(t.data),i.loading_wait_show=!1,i.ErrRequestShow(t),1==t.data.success)if(0==i.SkipCount&&(i.items=[],i.count=""),0==t.data.result.items.length)i.count="",i.bottomCountArea_show=!0;else{var e=t.data.result.totalCount,a=i.MaxResultCount+i.SkipCount;a<e&&(i.count=e-a,i.bottomCountArea_show=!0);for(var s=0;s<t.data.result.items.length;s++)t.data.result.items[s].billDate=t.data.result.items[s].billDate.slice(0,10);i.items=i.items.concat(t.data.result.items)}}})},IqcExemption:function(){var e=this,a=this;a.loading_wait_show=!0,t.request({url:a.connect_url+"api/services/wmspda/Inspection/IqcExemption",data:{MAC:a.MAC,Id:a.id},method:"POST",header:a.post_header,success:function(i){console.log(i.data),a.loading_wait_show=!1,a.ErrRequestShow(i),1==i.data.success&&(t.showToast({icon:"none",title:a.i18n.show_modal_exemptions,duration:2e3}),a.SkipCount=0,a.GetIqcHeaders(e.SkipCount,e.MaxResultCount))}})},GetIqcAqlNgQty:function(){var e=this;e.loading_wait_show=!0,t.request({url:e.connect_url+"api/services/wmspda/Inspection/GetIqcAqlNgQty",data:{MAC:e.MAC,SampleCode:e.SampleCode,Aql:e.Aql},method:"POST",header:e.post_header,success:function(a){if(console.log("获取不合格数量"),console.log(a.data),e.loading_wait_show=!1,console.log("接口里的"+e.loading_wait_show),e.ErrRequestShow(a),1==a.data.success){t.setStorageSync("rejectQtyStand",a.data.result.rejectQty);var i=t.getStorageSync("qcLevel");21==i?t.navigateTo({url:"../IncomingQualityInspection/IncomingQualityInspection"}):22==i&&t.navigateTo({url:"../IncomingQualityInspectionB/IncomingQualityInspectionB"})}}})}}),onLoad:function(){var e="",a=t.getStorageSync("title_permissionName");""!=a&&(e=a),t.setNavigationBarTitle({title:e})},onShow:function(){this.items=[],this.count="",this.MaxResultCount=this.SkipCount+this.MaxResultCount,this.GetIqcHeaders(0,this.MaxResultCount)}};e.default=_}).call(this,a("6e42")["default"])},"5c4b":function(t,e,a){},"938a":function(t,e,a){"use strict";var i=a("1720"),s=a.n(i);s.a},"9c62":function(t,e,a){"use strict";a.r(e);var i=a("b963"),s=a("cf7f");for(var n in s)"default"!==n&&function(t){a.d(e,t,function(){return s[t]})}(n);a("b6af");var o=a("2877"),c=Object(o["a"])(s["default"],i["a"],i["b"],!1,null,null,null);e["default"]=c.exports},b6af:function(t,e,a){"use strict";var i=a("f558"),s=a.n(i);s.a},b963:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("view",[a("view",{staticClass:"qualityInspection_head"},[a("text",[t._v(t._s(t.i18n.qualityInspection_head_a))]),a("text",[t._v(t._s(t.i18n.qualityInspection_head_b))]),a("text",[t._v(t._s(t.i18n.qualityInspection_head_c))]),a("text",[t._v(t._s(t.i18n.qualityInspection_head_d))]),a("text",[t._v(t._s(t.i18n.qualityInspection_head_e))]),a("text",[t._v(t._s(t.i18n.qualityInspection_head_f))])]),a("view",{staticClass:"qualityInspection_body"},[a("scroll-view",{staticClass:"scroll-Y",attrs:{"scroll-top":t.scrollTop,"scroll-y":"true",eventid:"e21734ac-1"},on:{scrolltoupper:t.upper,scrolltolower:t.lower,scroll:t.scroll}},[t._l(t.items,function(e,i){return a("view",{key:i,staticClass:"qualityInspection_body_list",attrs:{eventid:"e21734ac-0-"+i},on:{tap:function(a){t.Check(e.qcLevel,e.id)}}},[a("view",{staticClass:"qualityInspection_body_list_a"},[0==e.qcLevel?a("text",{staticClass:"qualityInspection_text_a",staticStyle:{background:"green"}},[t._v("免")]):t._e(),11==e.qcLevel?a("text",{staticClass:"qualityInspection_text_a",staticStyle:{background:"#FFB700"}},[t._v("C1")]):t._e(),12==e.qcLevel?a("text",{staticClass:"qualityInspection_text_a",staticStyle:{background:"#FFB700"}},[t._v("C2")]):t._e(),21==e.qcLevel?a("text",{staticClass:"qualityInspection_text_a"},[t._v("H1")]):t._e(),22==e.qcLevel?a("text",{staticClass:"qualityInspection_text_a"},[t._v("H2")]):t._e(),a("text",{staticClass:"qualityInspection_text_b"},[t._v(t._s(e.materialCode))]),a("text",{staticClass:"qualityInspection_text_c"},[null!=e.receiveQty?a("text",[t._v(t._s(e.receiveQty))]):t._e(),null==e.receiveQty?a("text",[t._v("0")]):t._e()]),a("text",{staticClass:"qualityInspection_text_d"},[null!=e.sampleQty?a("text",[t._v(t._s(e.sampleQty))]):t._e(),null==e.sampleQty?a("text",[t._v("0")]):t._e()]),a("text",{staticClass:"qualityInspection_text_e"},[null!=e.passQty?a("text",[t._v(t._s(e.passQty))]):t._e(),null==e.passQty?a("text",[t._v("0")]):t._e()]),1==e.qcResult?a("view",{staticClass:"qualityInspection_text_f"},[t._v(t._s(t.i18n.conformity))]):t._e(),2==e.qcResult?a("view",{staticClass:"qualityInspection_text_f"},[t._v(t._s(t.i18n.undetermined))]):t._e(),3==e.qcResult?a("view",{staticClass:"qualityInspection_text_f"},[t._v(t._s(t.i18n.non_conformity))]):t._e(),a("image",{staticClass:"qualityInspection_text_g",attrs:{src:t.quality_jiantou}})]),a("view",{staticClass:"qualityInspection_body_list_b"},[a("view",{staticClass:"qualityInspection_body_list_b_bl"},[a("text",[t._v(t._s(e.materialName))]),a("text",[t._v(t._s(e.supplierName))])]),a("view",{staticClass:"qualityInspection_body_list_b_bl"},[a("text",[t._v(t._s(t.i18n.arrival_date)+":"+t._s(e.billDate))]),a("text",[t._v(t._s(t.i18n.arrival_number)+":"+t._s(e.billCode))])])])])}),t.bottomCountArea_show?a("bottomCountArea",{attrs:{count:t.count,mpcomid:"e21734ac-0"}}):t._e()],2)],1),t.show_pop?a("popupLayer",{attrs:{date_a_show:t.StartDate,date_b_show:t.EndDate,input_data_a_show:t.ReceiptCode,input_data_b_show:t.MaterialCode,input_data_c_show:t.MaterialName,input_data_d_show:t.SupplierName,input_data_e_show:t.SourceCode,QcResult_show:t.QcResult,eventid:"e21734ac-2",mpcomid:"e21734ac-1"},on:{cancelPop:t.cancelPop,choDateA:t.choDateA,choDateB:t.choDateB,workA:t.workA,workB:t.workB,workC:t.workC,workD:t.workD,workE:t.workE,work:t.work,bindQcResultChange:t.bindQcResultChange}}):t._e(),t.loading_wait_show?a("loadingWait",{attrs:{mpcomid:"e21734ac-2"}}):t._e()],1)},s=[];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return s})},bc36:function(t,e,a){"use strict";a("72e6");var i=n(a("b0ce")),s=n(a("9c62"));function n(t){return t&&t.__esModule?t:{default:t}}Page((0,i.default)(s.default))},c6ec:function(t,e,a){"use strict";a.r(e);var i=a("ef30"),s=a("2f7d");for(var n in s)"default"!==n&&function(t){a.d(e,t,function(){return s[t]})}(n);a("938a");var o=a("2877"),c=Object(o["a"])(s["default"],i["a"],i["b"],!1,null,null,null);e["default"]=c.exports},cf7f:function(t,e,a){"use strict";a.r(e);var i=a("479a"),s=a.n(i);for(var n in i)"default"!==n&&function(t){a.d(e,t,function(){return i[t]})}(n);e["default"]=s.a},ef30:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("view",{staticClass:"loading_wait_area"},[a("div",{staticClass:"sk-cube-grid"},[a("div",{staticClass:"sk-cube sk-cube1"}),a("div",{staticClass:"sk-cube sk-cube2"}),a("div",{staticClass:"sk-cube sk-cube3"}),a("div",{staticClass:"sk-cube sk-cube4"}),a("div",{staticClass:"sk-cube sk-cube5"}),a("div",{staticClass:"sk-cube sk-cube6"}),a("div",{staticClass:"sk-cube sk-cube7"}),a("div",{staticClass:"sk-cube sk-cube8"}),a("div",{staticClass:"sk-cube sk-cube9"})]),a("view",{staticClass:"loading_mask"})])}];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return s})},f558:function(t,e,a){}},[["bc36","common/runtime","common/vendor"]]]);