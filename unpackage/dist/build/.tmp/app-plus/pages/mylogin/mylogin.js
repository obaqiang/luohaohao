(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/mylogin/mylogin"],{"02e6":function(e,t,n){"use strict";n.r(t);var o=n("eb9c"),a=n("236e");for(var r in a)"default"!==r&&function(e){n.d(t,e,function(){return a[e]})}(r);n("8938");var i=n("2877"),s=Object(i["a"])(a["default"],o["a"],o["b"],!1,null,null,null);t["default"]=s.exports},"236e":function(e,t,n){"use strict";n.r(t);var o=n("b514"),a=n.n(o);for(var r in o)"default"!==r&&function(e){n.d(t,e,function(){return o[e]})}(r);t["default"]=a.a},2371:function(e,t,n){},2431:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=u(n("d166")),a=u(n("02e6")),r=u(n("bf51")),i=u(n("d33f")),s=u(n("fbdb")),c=u(n("344f")),l=n("2f62");function u(e){return e&&e.__esModule?e:{default:e}}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){f(e,t,n[t])})}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h={components:{copyRightIntro:o.default,choServerModal:a.default,showModal:i.default,loadingWait:s.default,choServerModalNew:r.default,downloading:c.default},data:function(){return{ali_no_hook:"../../static/img/ali_no_hook.png",ali_hook:"../../static/img/ali_hook.png",login_head:"../../static/img/login_head.png",login_username:"../../static/img/login_username.png",login_clear:"../../static/img/login_clear.png",login_password:"../../static/img/login_password.png",login_password_show:"../../static/img/login_password_show.png",account:"",usernameOrEmailAddress:"admin",password:"",deviceType:"8",showchoservermodal:!1,TenantId:"1",ClientCode:"WPDA",ifshowmodal:!1,show_modal_header:"版本更新",show_modal_body:"",show_modal_from:"mylogin",updata_url:"",childPermissions:"",err:"",rember_login:!1,password_type:"password",loading_wait_show:!1,login_focus:!0,pwd_focus:!1,defaultA:"",defaultB:"",connect_url_show:"",downloading_show:!1,remark:""}},computed:{connect_url_all:function(){return this.$store.state.connect_url_all},connect_url:function(){var t=e.getStorageSync("connect_url");return""!=t?(this.changeServerUrl(t),t):this.$store.state.connect_url},current_language:function(){return this.$store.state.current_language},current_version:function(){return this.$store.state.current_version},post_header:function(){return this.$store.state.post_header},MAC:function(){return this.$store.state.MAC},i18n:function(){return this.$t("mylogin")},tenancyName:function(){var t=e.getStorageSync("tenancyName");return""!=t?t:this.$store.state.tenancyName}},watch:{connect_url:{handler:function(e,t){this.connect_url_show=e},immediate:!0},tenancyName:{handler:function(e,t){this.tenancyName_show=e},immediate:!0}},methods:d({},(0,l.mapMutations)(["changeToken"]),(0,l.mapMutations)(["changeOrgId"]),(0,l.mapMutations)(["changePostHeader"]),(0,l.mapMutations)(["MyLoginSucRes"]),(0,l.mapMutations)(["initPosition"]),(0,l.mapMutations)(["MacInfo"]),(0,l.mapMutations)(["ErrRequestShow"]),(0,l.mapMutations)(["RequestErrToast"]),(0,l.mapMutations)(["changeIpNet"]),(0,l.mapMutations)(["changeServerUrl"]),{bindLogin:function(){if(this.initPosition(),this.account.length<5)e.showToast({icon:"none",title:"账号最短为 5 个字符"});else if(this.password.length<6)e.showToast({icon:"none",title:"密码最短为 6 个字符"});else{var t=this;try{this.ClientLogin(),setTimeout(function(){t.loading_wait_show=!1},6e3)}catch(n){this.loading_wait_show=!1,e.showToast({icon:"none",title:"服务地址配置路径不合法",duration:3e3})}}},accountConfirm:function(){this.login_focus=!1,this.pwd_focus=!0},choServer:function(){for(var e=0;e<this.connect_url_all.length;e++)this.connect_url==this.connect_url_all[e]&&(this.defaultA=e);"zh-CN"==this.$i18n.locale?this.defaultB=0:"en"==this.$i18n.locale?this.defaultB=1:(this.$i18n.locale="zh-TW")&&(this.defaultB=2),this.showchoservermodal=!this.showchoservermodal},conFirmCho:function(e){this.showchoservermodal=!1,this.connect_url_show=e.connect_url_show,this.tenancyName_show=e.tenancyName_show},closeChoServerModal:function(){this.showchoservermodal=!this.showchoservermodal},doDownLoad:function(){var t=this;e.showToast({icon:"none",title:"开始下载",duration:3e3}),t.downloading_show=!0;var n=plus.downloader.createDownload(t.updata_url,{},function(n,o){if(console.log(n),console.log(o),200==o){var a=n.filename;plus.runtime.install(a),console.log(n.filename),t.loading_wait_show=!1}else e.showToast({icon:"none",title:"下载失败",duration:3e3}),t.loading_wait_show=!1});n.start()},showModalsuccess:function(e){var t=this;e?(t.doDownLoad(),t.ifshowmodal=!1):this.ifshowmodal=!1},RemberLogin:function(){var e=this;e.rember_login=!e.rember_login},DeleteLoginName:function(){var e=this;e.account="",e.password=""},ChangeInputType:function(){var e=this;console.log(132),"password"==e.password_type?e.password_type="text":e.password_type="password"},ClientLogin:function(){var t=this;1==t.rember_login?(e.setStorageSync("account",t.account),e.setStorageSync("password",t.password)):(e.setStorageSync("account",""),e.setStorageSync("password","")),t.loading_wait_show=!0,t.MacInfo(),t.changeIpNet(),e.request({url:t.connect_url_show+"api/Account/ClientLogin",data:{tenancyName:t.tenancyName_show,usernameOrEmailAddress:t.account,password:t.password,deviceType:t.deviceType,MAC:t.MAC},method:"POST",header:{"Content-Type":"application/json","Abp.Localization.CultureName":t.$i18n.locale},success:function(e){t.loading_wait_show=!1,t.MyLoginSucRes(e)},fail:function(e){t.loading_wait_show=!1,t.RequestErrToast()}})},GetCSVersion:function(){var t=this;e.request({url:t.connect_url_show+"api/services/app/ClientVersion/GetCSVersion",data:{TenantId:t.TenantId,ClientCode:t.ClientCode},method:"POST",header:{"Content-Type":"application/json",Authorization:"Bearer "+t.token,"Abp.Localization.CultureName":t.$i18n.locale},success:function(n){console.log(n.data),t.ErrRequestShow(n),null!=n.data.result?(t.remark=n.data.result.remark,t.updata_url=t.connect_url+n.data.result.path.replace(/\\/g,"/"),t.current_version<n.data.result.version&&(1==n.data.result.updateMode?(t.ifshowmodal=!0,t.show_modal_body="可升级"):2==n.data.result.updateMode&&t.doDownLoad())):e.showModal({title:"缺失apk文件"})},fail:function(e){t.RequestErrToast()}})}}),onLoad:function(){var t=this,n=e.getStorageSync("current_language");""!=n&&(this.$i18n.locale=n);try{this.GetCSVersion()}catch(o){console.log(o)}t.account=e.getStorageSync("account"),t.password=e.getStorageSync("password"),""!=t.account&&(t.rember_login=!0),this.initPosition()}};t.default=h}).call(this,n("6e42")["default"])},6020:function(e,t,n){},"6df0":function(e,t,n){"use strict";var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("view",[e.showchoservermodal?n("choServerModalNew",{attrs:{connect_url:e.connect_url_show,defaultA:e.defaultA,defaultB:e.defaultB,showchoservermodal:e.closeChoServerModal,tenancyName:e.tenancyName_show,eventid:"48ec72fe-0",mpcomid:"48ec72fe-0"},on:{closeChoServerModal:e.closeChoServerModal,conFirmCho:e.conFirmCho}}):e._e(),n("image",{staticClass:"login_head",attrs:{src:e.login_head}}),n("view",{staticClass:"head_login_text_area"},[n("view",{staticClass:"login_text"},[e._v(e._s(e.i18n.login_text))]),n("view",[n("view",{staticClass:"login_in"},[n("image",{staticClass:"login_username",attrs:{src:e.login_username}}),n("input",{directives:[{name:"model",rawName:"v-model",value:e.account,expression:"account"}],staticClass:"login_input",attrs:{type:"text",placeholder:e.i18n.a_text,focus:e.login_focus,eventid:"48ec72fe-1"},domProps:{value:e.account},on:{confirm:e.accountConfirm,input:function(t){t.target.composing||(e.account=t.target.value)}}}),n("image",{staticClass:"login_clear",attrs:{src:e.login_clear,eventid:"48ec72fe-2"},on:{tap:e.DeleteLoginName}})]),n("view",{staticClass:"login_in"},[n("image",{staticClass:"login_username",attrs:{src:e.login_password}}),"password"==e.password_type?n("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"login_input",attrs:{type:"password",placeholder:e.i18n.b_text,focus:e.pwd_focus,eventid:"48ec72fe-3"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}):e._e(),"password"!=e.password_type?n("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"login_input",attrs:{type:"text",placeholder:e.i18n.b_text,focus:e.pwd_focus,eventid:"48ec72fe-4"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}):e._e(),n("image",{staticClass:"login_clear",attrs:{src:e.login_password_show,eventid:"48ec72fe-5"},on:{tap:e.ChangeInputType}})]),n("view",{staticClass:"my_login_hook_area",attrs:{eventid:"48ec72fe-6"},on:{tap:e.RemberLogin}},[0==e.rember_login?n("image",{staticClass:"ali_icon",attrs:{src:e.ali_no_hook}}):e._e(),e.rember_login?n("image",{staticClass:"ali_icon",attrs:{src:e.ali_hook}}):e._e(),n("text",[e._v(e._s(e.i18n.c_text))])]),n("button",{staticClass:"btn_login",attrs:{eventid:"48ec72fe-7"},on:{tap:e.bindLogin}},[e._v(e._s(e.i18n.login_in_now))]),n("button",{staticClass:"btn_server",attrs:{eventid:"48ec72fe-8"},on:{tap:e.choServer}},[e._v(e._s(e.i18n.configure_server))]),e._v(e._s(e.err))],1)]),n("copyRightIntro",{attrs:{mpcomid:"48ec72fe-1"}}),e.ifshowmodal?n("showModal",{attrs:{show_modal_header:e.show_modal_header,show_modal_body:e.show_modal_body,show_modal_from:e.show_modal_from,updata_url:e.updata_url,eventid:"48ec72fe-9",mpcomid:"48ec72fe-2"},on:{showModalClick:e.showModalsuccess}}):e._e(),e.loading_wait_show?n("loadingWait",{attrs:{mpcomid:"48ec72fe-3"}}):e._e(),e.downloading_show?n("downloading",{attrs:{remark:e.remark,mpcomid:"48ec72fe-4"}}):e._e()],1)},a=[];n.d(t,"a",function(){return o}),n.d(t,"b",function(){return a})},8938:function(e,t,n){"use strict";var o=n("2371"),a=n.n(o);a.a},"89f7":function(e,t,n){"use strict";n.r(t);var o=n("2431"),a=n.n(o);for(var r in o)"default"!==r&&function(e){n.d(t,e,function(){return o[e]})}(r);t["default"]=a.a},"94ff":function(e,t,n){"use strict";n.r(t);var o=n("6df0"),a=n("89f7");for(var r in a)"default"!==r&&function(e){n.d(t,e,function(){return a[e]})}(r);n("ef4c");var i=n("2877"),s=Object(i["a"])(a["default"],o["a"],o["b"],!1,null,null,null);t["default"]=s.exports},9608:function(e,t,n){"use strict";n.r(t);var o=n("fd95"),a=n.n(o);for(var r in o)"default"!==r&&function(e){n.d(t,e,function(){return o[e]})}(r);t["default"]=a.a},9610:function(e,t,n){"use strict";var o=n("6020"),a=n.n(o);a.a},b514:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n("2f62");function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){r(e,t,n[t])})}return e}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i={props:["showchoservermodal"],components:{},data:function(){return{array:["中文","English","繁體"],index:0}},computed:(0,o.mapState)(["connect_url_all"]),methods:a({},(0,o.mapMutations)(["changeServerUrl"]),{choServer:function(e){this.changeServerUrl(e)},bindPickerChange:function(e){console.log("picker发送选择改变，携带值为",e.target.value),this.index=e.target.value,0==this.index?this.$i18n.locale="zh-CN":1==this.index?this.$i18n.locale="en":2==this.index&&(this.$i18n.locale="zh-TW"),console.log(this.$i18n.locale)},closeChoServerModal:function(){this.$emit("success",!0)}}),onLoad:function(){console.log(132),console.log(this.connect_url_all)}};t.default=i},bc69:function(e,t,n){},c1cb:function(e,t,n){"use strict";var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("view",{staticClass:"text"})},a=[];n.d(t,"a",function(){return o}),n.d(t,"b",function(){return a})},d166:function(e,t,n){"use strict";n.r(t);var o=n("c1cb"),a=n("9608");for(var r in a)"default"!==r&&function(e){n.d(t,e,function(){return a[e]})}(r);n("9610");var i=n("2877"),s=Object(i["a"])(a["default"],o["a"],o["b"],!1,null,null,null);t["default"]=s.exports},eb9c:function(e,t,n){"use strict";var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("view",[n("view",{staticClass:"choServerModal_mask",attrs:{eventid:"833ee8fa-0"},on:{tap:e.closeChoServerModal}}),n("view",{staticClass:"choServerModal_server_area"},[e._l(e.connect_url_all,function(t,o){return n("button",{key:o,attrs:{eventid:"833ee8fa-1-"+o},on:{tap:function(n){e.choServer(t)}}},[e._v(e._s(t))])}),n("view",{staticClass:"setlanguagearea"},[e._v("选择语言:"),n("picker",{attrs:{value:e.index,range:e.array,eventid:"833ee8fa-2"},on:{change:e.bindPickerChange}},[n("view",{staticClass:"uni-input"},[e._v(e._s(e.array[e.index]))])])],1)],2)])},a=[];n.d(t,"a",function(){return o}),n.d(t,"b",function(){return a})},ee4a:function(e,t,n){"use strict";n("72e6");var o=r(n("b0ce")),a=r(n("94ff"));function r(e){return e&&e.__esModule?e:{default:e}}Page((0,o.default)(a.default))},ef4c:function(e,t,n){"use strict";var o=n("bc69"),a=n.n(o);a.a},fd95:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o={data:function(){return{}},computed:{i18n:function(){return this.$t("copyRightIntro")}}};t.default=o}},[["ee4a","common/runtime","common/vendor"]]]);